<div class="content row" id="social" onclick="hideSearch()">
    <div class="avcon">
        <div class="row avcon_inner">
            <div class="col-lg-6">
                <div class="card show">
                    <img class="show" id="initial" src="<?php echo $urlP; ?>Vistas/img/images/avatar.jpeg">
                </div>
                <div class="watch">
                    <div class="calif">
                        <h1 id="movTit"></h1>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="112.28" height="111.445" viewBox="0 0 112.28 111.445">
                              <defs>
                                <filter id="Rectángulo_1401" x="0" y="0" width="112.28" height="111.445" filterUnits="userSpaceOnUse">
                                  <feOffset dy="3" input="SourceAlpha"/>
                                  <feGaussianBlur stdDeviation="3" result="blur"/>
                                  <feFlood flood-color="#ffc000" flood-opacity="0.251"/>
                                  <feComposite operator="in" in2="blur"/>
                                  <feComposite in="SourceGraphic"/>
                                </filter>
                                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                                  <stop offset="0" stop-color="#f90"/>
                                  <stop offset="0.226" stop-color="#ffad00"/>
                                  <stop offset="0.443" stop-color="#ffb600"/>
                                  <stop offset="0.519" stop-color="#ffbf00"/>
                                  <stop offset="0.724" stop-color="#ffda00"/>
                                  <stop offset="1" stop-color="#ff0"/>
                                </linearGradient>
                              </defs>
                              <g id="Volver_atras" data-name="Volver atras" transform="translate(9 6)">
                                <g transform="matrix(1, 0, 0, 1, -9, -6)" filter="url(#Rectángulo_1401)">
                                  <rect id="Rectángulo_1401-2" data-name="Rectángulo 1401" width="94.28" height="93.445" rx="38" transform="translate(9 6)" class="Actbut"/>
                                </g>
                                <path id="Trazado_3311" data-name="Trazado 3311" d="M171.01,797.441V780.966h16.475l-7.569,7.583a13.924,13.924,0,0,0,9.924,4.2,14.113,14.113,0,0,0,13.3-9.408h.042a15,15,0,0,0,.613-2.356h4.739a18.827,18.827,0,0,1-18.678,16.475h-.028a18.715,18.715,0,0,1-13.311-5.506l-5.506,5.506Zm4.878-21.186h-4.739a18.827,18.827,0,0,1,18.678-16.475h0a18.716,18.716,0,0,1,13.311,5.506l5.52-5.506v16.475H192.183l7.583-7.583a14.014,14.014,0,0,0-23.235,5.213h-.042a15,15,0,0,0-.613,2.356h0Z" transform="translate(-142.489 -732.134)" fill="url(#linear-gradient)"/>
                              </g>
                            </svg>
                        </div>
                        <div class="col-lg-3">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="112.28" height="109.82" viewBox="0 0 112.28 109.82">
                              <defs>
                                <filter id="Rectángulo_1403" x="0" y="0" width="112.28" height="109.82" filterUnits="userSpaceOnUse">
                                  <feOffset dy="1" input="SourceAlpha"/>
                                  <feGaussianBlur stdDeviation="3" result="blur"/>
                                  <feFlood flood-color="#ffc000" flood-opacity="0.251"/>
                                  <feComposite operator="in" in2="blur"/>
                                  <feComposite in="SourceGraphic"/>
                                </filter>
                                <linearGradient id="linear-gradient" y1="0.5" x2="1.001" y2="0.5" gradientUnits="objectBoundingBox">
                                  <stop offset="0" stop-color="#f90"/>
                                  <stop offset="0.27" stop-color="#ffad00"/>
                                  <stop offset="0.46" stop-color="#ffb600"/>
                                  <stop offset="0.58" stop-color="#ffbf00"/>
                                  <stop offset="0.78" stop-color="#ffda00"/>
                                  <stop offset="1" stop-color="#ff0"/>
                                </linearGradient>
                              </defs>
                              <g id="No_me_gusta" data-name="No me gusta" transform="translate(9 8)"  style="cursor: pointer;" onclick="reload();" >
                                <g transform="matrix(1, 0, 0, 1, -9, -8)" filter="url(#Rectángulo_1403)">
                                  <rect id="Rectángulo_1403-2" data-name="Rectángulo 1403" width="94.28" height="91.82" rx="44" transform="translate(9 8)" fill="#26231b"/>
                                </g>
                                <g id="Grupo_2465" data-name="Grupo 2465" transform="translate(47.614 69.314) rotate(-135)">
                                  <rect id="Rectángulo_1172" data-name="Rectángulo 1172" width="34.059" height="6.815" transform="translate(0 13.64)" fill="url(#linear-gradient)"/>
                                  <rect id="Rectángulo_1177" data-name="Rectángulo 1177" width="34.059" height="6.815" transform="translate(20.437 0) rotate(90)" fill="url(#linear-gradient)"/>
                                </g>
                                <g id="Grupo_3029" data-name="Grupo 3029" transform="translate(47.614 69.314) rotate(-135)">
                                  <g id="Grupo_3030" data-name="Grupo 3030" transform="translate(0 0)">
                                    <rect id="Rectángulo_1172-2" data-name="Rectángulo 1172" width="34.059" height="6.815" transform="translate(0 13.64)" fill="url(#linear-gradient)"/>
                                    <rect id="Rectángulo_1177-2" data-name="Rectángulo 1177" width="34.059" height="6.815" transform="translate(20.437) rotate(90)" fill="url(#linear-gradient)"/>
                                  </g>
                                </g>
                              </g>
                            </svg>
                        </div>
                        <div class="col-lg-3">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="112.28" height="111.445" viewBox="0 0 112.28 111.445">
                              <defs>
                                <filter id="Trazado_4506" x="0" y="0" width="112.28" height="111.445" filterUnits="userSpaceOnUse">
                                  <feOffset dy="1" input="SourceAlpha"/>
                                  <feGaussianBlur stdDeviation="3" result="blur"/>
                                  <feFlood flood-color="#ffc000" flood-opacity="0.251"/>
                                  <feComposite operator="in" in2="blur"/>
                                  <feComposite in="SourceGraphic"/>
                                </filter>
                                <linearGradient id="linear-gradient" y1="0.5" x2="1.001" y2="0.5" gradientUnits="objectBoundingBox">
                                  <stop offset="0" stop-color="#f90"/>
                                  <stop offset="0.27" stop-color="#ffad00"/>
                                  <stop offset="0.46" stop-color="#ffb600"/>
                                  <stop offset="0.58" stop-color="#ffbf00"/>
                                  <stop offset="0.78" stop-color="#ffda00"/>
                                  <stop offset="1" stop-color="#ff0"/>
                                </linearGradient>
                              </defs>
                              <g id="Agregar_a_mi_lista" data-name="Agregar a mi lista" transform="translate(9 8)">
                                <g id="Grupo_2728" data-name="Grupo 2728" transform="translate(0 0)">
                                  <g transform="matrix(1, 0, 0, 1, -9, -8)" filter="url(#Trazado_4506)">
                                    <path id="Trazado_4506-2" data-name="Trazado 4506" d="M36.711,0H57.569A36.711,36.711,0,0,1,94.28,36.711V56.735A36.711,36.711,0,0,1,57.569,93.445H36.711A36.711,36.711,0,0,1,0,56.735V36.711A36.711,36.711,0,0,1,36.711,0Z" transform="translate(9 8)" fill="#26231b"/>
                                  </g>
                                </g>
                                <g id="Grupo_3031" data-name="Grupo 3031" transform="translate(30.111 63.752) rotate(-90)">
                                  <rect id="Rectángulo_1172" data-name="Rectángulo 1172" width="34.059" height="6.815" transform="translate(0 13.64)" fill="url(#linear-gradient)"/>
                                  <rect id="Rectángulo_1177" data-name="Rectángulo 1177" width="34.059" height="6.815" transform="translate(20.437 0) rotate(90)" fill="url(#linear-gradient)"/>
                                </g>
                              </g>
                            </svg>
                        </div>
                        <div class="col-lg-3">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="112.28" height="109.82" viewBox="0 0 112.28 109.82">
                              <defs>
                                <filter id="Rectángulo_1404" x="0" y="0" width="112.28" height="109.82" filterUnits="userSpaceOnUse">
                                  <feOffset dy="1" input="SourceAlpha"/>
                                  <feGaussianBlur stdDeviation="3" result="blur"/>
                                  <feFlood flood-color="#ffc000" flood-opacity="0.251"/>
                                  <feComposite operator="in" in2="blur"/>
                                  <feComposite in="SourceGraphic"/>
                                </filter>
                                <linearGradient id="linear-gradient" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                                  <stop offset="0" stop-color="#f90"/>
                                  <stop offset="0.251" stop-color="#ffad00"/>
                                  <stop offset="0.418" stop-color="#ffb600"/>
                                  <stop offset="0.582" stop-color="#ffbf00"/>
                                  <stop offset="0.757" stop-color="#ffda00"/>
                                  <stop offset="1" stop-color="#ff0"/>
                                </linearGradient>
                                <linearGradient id="linear-gradient-2" x1="0.5" x2="0.5" y2="1" gradientUnits="objectBoundingBox">
                                  <stop offset="0" stop-color="#f90"/>
                                  <stop offset="0.264" stop-color="#ffad00"/>
                                  <stop offset="0.414" stop-color="#ffb600"/>
                                  <stop offset="0.582" stop-color="#ffbf00"/>
                                  <stop offset="0.774" stop-color="#ffda00"/>
                                  <stop offset="1" stop-color="#ff0"/>
                                </linearGradient>
                              </defs>
                              <g id="Compartir" transform="translate(9 8)">
                                <g transform="matrix(1, 0, 0, 1, -9, -8)" filter="url(#Rectángulo_1404)">
                                  <rect id="Rectángulo_1404-2" data-name="Rectángulo 1404" width="94.28" height="91.82" rx="44" transform="translate(9 8)" fill="#26231b"/>
                                </g>
                                <g id="Icon_feather-share" data-name="Icon feather-share" transform="translate(33.636 29.453)">
                                  <path id="Path_3708" data-name="Path 3708" d="M25.386,34.126H8.622A5.128,5.128,0,0,1,3.5,29V17.828a2.328,2.328,0,0,1,4.657,0V29a.466.466,0,0,0,.466.466H25.386A.466.466,0,0,0,25.852,29V17.828a2.328,2.328,0,0,1,4.657,0V29A5.128,5.128,0,0,1,25.386,34.126Z" transform="translate(-3.5 -1.212)" fill="url(#linear-gradient)"/>
                                  <path id="Icon_metro-arrow-up" data-name="Icon metro-arrow-up" d="M25.773,12.6,17.51,4.34a1.652,1.652,0,0,0-2.337,0L6.911,12.6A1.652,1.652,0,0,0,9.248,14.94L14.689,9.5v15.84a1.652,1.652,0,0,0,3.3,0V9.5l5.442,5.442A1.652,1.652,0,0,0,25.773,12.6Z" transform="translate(-2.838 -3.856)" fill="url(#linear-gradient-2)"/>
                                </g>
                              </g>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 info">
              <div class="filter">
                <?php
                include ('estre.php');
                ?>
                156 Reseñas
                    <button onclick="showFilter()">
                      Filtros 
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(253, 158, 40)" class="bi bi-filter" viewBox="0 0 16 16">
                        <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
                      </svg>
                    </button>
                </div>
                <div class="detail">
                    2022. Drama, Acción. 3h 10min 
                </div>
                <div class="h2 color-white">
                    
                </div>
                <div class="desc" id="desc">
                    Más de una década después de los acontecimientos de 'Avatar', los Na'vi Jake Sully, Neytiri y sus hijos viven en paz en los bosques de Pandora hasta que regresan los hombres del cielo. Ver más...
                </div>
                <div class="where">
                    <h3>Ver ahora en:</h3>
                    <div class="row">
                      <div class="col-12" id="platforms">
                        <img src="<?php echo $urlP; ?>Vistas/img/images/prime.png">
                        <img src="<?php echo $urlP; ?>Vistas/img/images/disney.png">
                        <img src="<?php echo $urlP; ?>Vistas/img/images/hbo.png">
                      </div>
                    </div>
                    <h3 class="mt-4">Elenco</h3>
                    <div class="elenco" id="elenc">
                        <div class="row mt-3">
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/jakesully.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Sam Worthington</p>
                                      <p class="text-small cn">Jake Sully</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/neytiri.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Zoe Saldana</p>
                                      <p class="text-small cn">Neytiri</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/grace.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Sigourney Weaver</p>
                                      <p class="text-small cn">Grace</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/jakesully.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Sam Worthington</p>
                                      <p class="text-small cn">Jake Sully</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/neytiri.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Zoe Saldana</p>
                                      <p class="text-small cn">Neytiri</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                            <!---element------>
                            <div class="col-4">
                                <div class="elenco_inner">
                                  <div class="col-12 shim">
                                      <img src="<?php echo $urlP; ?>Vistas/img/images/grace.jpeg">
                                  </div>
                                  <div class="col-12 text-white">
                                      <p class="h5">Sigourney Weaver</p>
                                      <p class="text-small cn">Grace</p>
                                  </div>
                                </div>
                            </div>
                            <!---element------>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="actions col-12">
        <div class="row">
            <div class="col-6 text-center">
                <button class="seen">Ya lo ví</button>
            </div>
            <div class="col-6 text-right">
                <button onclick="reload();" class="cn">Próximo ></button>
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">

        let imgPath = "https://image.tmdb.org/t/p/original";
        let mainImgPath = "https://image.tmdb.org/t/p/w500";

        let mainURL = "https://api.themoviedb.org/3/movie/";
        let APIkey = "?api_key=f359e4f5496836068edda48527fe8c58";
        let baseMovURL = "https://api.themoviedb.org/3/discover/movie?api_key=f359e4f5496836068edda48527fe8c58&language=es&sort_by=popularity.desc";
       
        function reload(){
            const baseMov = new XMLHttpRequest();
            baseMov.open("GET", baseMovURL, true);
            baseMov.onload = function() {
                var response = JSON.parse(this.responseText);
                var array = response.results;
                var rand = Math.random() * (array.length - 0) + 0;
                // console.log(array.length);
                rand = parseInt(rand);
                // console.log(rand);
                array = response.results[rand];
        
                var movieId = array.id;

                var discoverURL = mainURL + movieId + APIkey + "&language=es";

                // Coloco el id de la peli para el boton no me gusta
                document.getElementById("No_me_gusta").setAttribute("PeliId", movieId);

                const discover = new XMLHttpRequest();
                discover.open("GET", discoverURL, true);
                discover.onload = function() {
                    var response = JSON.parse(this.responseText);
                    imgFile = response.poster_path;
                    document.getElementById("movTit").innerHTML = response.title;
                    var descIn = response.overview;
                    descIn = descIn.slice(0, 500)+' <a href="#">Ver más</a>';
                    document.getElementById("desc").innerHTML = descIn;
                }
                discover.send();

                const picture = new XMLHttpRequest();
                var getPic = mainURL + movieId + "/images" + APIkey;
                picture.open("GET",getPic,true);
                picture.onload = function() {
                    var response = JSON.parse(this.responseText);
                    document.getElementById("initial").src = mainImgPath + response.posters[3].file_path;

                }
                picture.send();


                // const detail = new XMLHttpRequest();
                // var getDet = mainURL + movieId + "/credits" + APIkey;
                // detail.open("GET",getDet,true);
                // detail.onload = function() {
                //     var response = JSON.parse(this.responseText);
                //     document.getElementById("director").innerHTML = response.crew[1].name;

                // }
                // detail.send();

                // const platfotm = new XMLHttpRequest();
                // var getPlat = mainURL + movieId + "/watch/providers" + APIkey;
                // platfotm.open("GET",getPlat,true);
                // platfotm.onload = function() {
                //     var response = JSON.parse(this.responseText);
                //     result = response.results.AR.flatrate[0].logo_path;
                //     // for (var i = response.flatrate.length - 1; i >= 0; i--) {
                //     //     Things[i]
                //     // }
                //     document.getElementById("platforms").src = imgPath + result;

                // }
                // platfotm.send();

                // const similar = new XMLHttpRequest();
                // var getSim = mainURL + movieId + "/similar" + APIkey;
                // similar.open("GET",getSim,true);
                // similar.onload = function() {
                //     var response = JSON.parse(this.responseText);
                //     // for (var i = response.flatrate.length - 1; i >= 0; i--) {
                //     //     Things[i]
                //     // }
                //     document.getElementById("similar").src = imgPath + response.results[0].poster_path;

                // }
                // similar.send();
                            

            }
            baseMov.send();
        }
        reload();

        
        


    </script>
